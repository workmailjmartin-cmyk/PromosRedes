<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feliz Viaje - Gesti√≥n</title>
    <link rel="icon" href="Favicon.ico" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
</head>
<body>

    <div id="login-container" class="login-container">
        <div class="login-box">
            <div class="logo"><img src="logo.png" alt="Feliz Viaje" style="height: 80px; margin: 0 auto;"></div>
            <h2 style="color:#11173d;">Acceso Plataforma</h2>
            <button id="login-button" class="btn btn-primario" style="width:100%; margin-top:20px;">Iniciar con Google</button>
        </div>
    </div>

    <div id="app-container" style="display:none;">
        
        <header class="main-header">
            <div class="header-content">
                <div class="logo" title="Recargar p√°gina">
                    <img src="logo.png" alt="Logo Feliz Viaje" id="app-logo">
                </div>

                <nav class="app-nav">
                    <button class="nav-button active" id="nav-search">Buscar</button>
                    <button class="nav-button" id="nav-upload">Cargar</button>
                    <!-- <button class="nav-button" id="nav-gestion" style="display:none;">
                        Gesti√≥n
                        <span id="badge-gestion" class="nav-badge">0</span>
                    </button> //--> 
                    <button class="nav-button" id="nav-users" style="display:none;">Usuarios</button>
                </nav>

                <div class="user-info">
                    <span id="user-email">Cargando...</span>
                    <button class="Btn" id="logout-button">
                        <div class="sign"><svg viewBox="0 0 512 512"><path d="M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"></path></svg></div>
                        <div class="text">Salir</div>
                    </button>
                </div>
            </div>
        </header>

        <div class="container">
            <div id="view-search" class="view active">
                <div id="weekly-planner" class="planner-wrapper" style="display:none;">
                    <div class="planner-header" id="planner-header-btn">
                        <div class="planner-title">
                            üìÖ Planificaci√≥n Semanal
                        </div>
                        <div class="planner-toggle-icon">‚ñº</div>
                    </div>
                    
                    <div class="planner-body" id="planner-body-content">
                        <div class="planner-grid">
                            <div class="day-card" id="day-card-1">
                                <div class="day-title">Lunes <span id="date-1" style="font-weight:400; font-size:0.8em;"></span></div>
                                <textarea class="day-textarea" id="note-lunes" placeholder="A cotizar..."></textarea>
                            </div>
                            <div class="day-card" id="day-card-2">
                                <div class="day-title">Martes <span id="date-2" style="font-weight:400; font-size:0.8em;"></span></div>
                                <textarea class="day-textarea" id="note-martes" placeholder="A cotizar..."></textarea>
                            </div>
                            <div class="day-card" id="day-card-3">
                                <div class="day-title">Mi√©rcoles <span id="date-3" style="font-weight:400; font-size:0.8em;"></span></div>
                                <textarea class="day-textarea" id="note-miercoles" placeholder="A cotizar..."></textarea>
                            </div>
                            <div class="day-card" id="day-card-4">
                                <div class="day-title">Jueves <span id="date-4" style="font-weight:400; font-size:0.8em;"></span></div>
                                <textarea class="day-textarea" id="note-jueves" placeholder="A cotizar..."></textarea>
                            </div>
                            <div class="day-card" id="day-card-5">
                                <div class="day-title">Viernes <span id="date-5" style="font-weight:400; font-size:0.8em;"></span></div>
                                <textarea class="day-textarea" id="note-viernes" placeholder="A cotizar..."></textarea>
                            </div>
                        </div>
                        
                        <div class="planner-actions">
                            <button id="btn-save-planning" class="btn btn-primario" style="padding: 8px 20px; font-size:0.9em;">üíæ Guardar Planificaci√≥n</button>
                        </div>
                    </div>
                </div>
                <div class="panel-filtros">
                    <div class="filtro-group large">
                        <label>Destino</label>
                        <input type="text" id="filtro-destino" placeholder="Ej: Punta Cana...">
                    </div>
                    
                    <div class="filtro-group">
                        <label>üìç Salida desde</label>
                        <select id="filtro-salida" style="border: 1px solid #ddd; border-radius: 6px; width: 170px;">
                            <option value="">Todas las Provincias</option>
                            <option value="CABA">CABA (Ciudad Aut√≥noma de Bs As)</option>
                            <option value="Buenos Aires">Buenos Aires (Provincia)</option>
                            <option value="Catamarca">Catamarca</option>
                            <option value="Chaco">Chaco</option>
                            <option value="Chubut">Chubut</option>
                            <option value="C√≥rdoba">C√≥rdoba</option>
                            <option value="Corrientes">Corrientes</option>
                            <option value="Entre R√≠os">Entre R√≠os</option>
                            <option value="Formosa">Formosa</option>
                            <option value="Jujuy">Jujuy</option>
                            <option value="La Pampa">La Pampa</option>
                            <option value="La Rioja">La Rioja</option>
                            <option value="Mendoza">Mendoza</option>
                            <option value="Misiones">Misiones</option>
                            <option value="Neuqu√©n">Neuqu√©n</option>
                            <option value="R√≠o Negro">R√≠o Negro</option>
                            <option value="Salta">Salta</option>
                            <option value="San Juan">San Juan</option>
                            <option value="San Luis">San Luis</option>
                            <option value="Santa Cruz">Santa Cruz</option>
                            <option value="Santa Fe">Santa Fe</option>
                            <option value="Santiago del Estero">Santiago del Estero</option>
                            <option value="Tierra del Fuego">Tierra del Fuego</option>
                            <option value="Tucum√°n">Tucum√°n</option>
                        </select>
                    </div>
                    <div class="filtro-group" id="container-filtro-creador">
                        <label>Creador</label>
                        <select id="filtro-creador"><option value="">Todas las Franquicias</option></select>
                    </div>
                    <div class="filtro-group">
                        <label>Promoci√≥n</label>
                        <select id="filtro-promo"><option value="">Todas</option><option value="Solo X Hoy">Solo X Hoy</option><option value="FEED">FEED</option><option value="ADS">ADS</option></select>
                    </div>
                    <div class="filtro-group">
                        <label>Orden</label>
                        <select id="filtro-orden"><option value="reciente">Recientes</option><option value="menor_precio">Menor Precio</option><option value="mayor_precio">Mayor Precio</option></select>
                    </div>
                    <div class="panel-actions">
                        <button id="boton-buscar" class="btn btn-primario">Buscar</button>
                        <button id="boton-limpiar" class="btn btn-secundario">Limpiar</button>
                    </div>
                </div>
                <div id="grilla-paquetes" class="grilla-resultados"></div>
            </div>

            <div id="view-upload" class="view">
                <div class="upload-form-container">
                    <h2 class="section-title" style="margin-top:0;">Informaci√≥n del Viaje</h2>
                    <form id="upload-form">
                        <div class="form-group-row">
                            <div class="form-group">
                                <label>Destino</label>
                                <input type="text" id="upload-destino" required>
                            </div>
                        
                            <div class="form-group">
                                <label>Provincia de Salida</label>
                                <select id="upload-salida" required style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
                                    <option value="" disabled selected>Selecciona...</option>
                                    <option value="CABA">CABA (Ciudad Aut√≥noma de Bs As)</option>
                                    <option value="Buenos Aires">Buenos Aires (Provincia)</option>
                                    <option value="Catamarca">Catamarca</option>
                                    <option value="Chaco">Chaco</option>
                                    <option value="Chubut">Chubut</option>
                                    <option value="C√≥rdoba">C√≥rdoba</option>
                                    <option value="Corrientes">Corrientes</option>
                                    <option value="Entre R√≠os">Entre R√≠os</option>
                                    <option value="Formosa">Formosa</option>
                                    <option value="Jujuy">Jujuy</option>
                                    <option value="La Pampa">La Pampa</option>
                                    <option value="La Rioja">La Rioja</option>
                                    <option value="Mendoza">Mendoza</option>
                                    <option value="Misiones">Misiones</option>
                                    <option value="Neuqu√©n">Neuqu√©n</option>
                                    <option value="R√≠o Negro">R√≠o Negro</option>
                                    <option value="Salta">Salta</option>
                                    <option value="San Juan">San Juan</option>
                                    <option value="San Luis">San Luis</option>
                                    <option value="Santa Cruz">Santa Cruz</option>
                                    <option value="Santa Fe">Santa Fe</option>
                                    <option value="Santiago del Estero">Santiago del Estero</option>
                                    <option value="Tierra del Fuego">Tierra del Fuego</option>
                                    <option value="Tucum√°n">Tucum√°n</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group-row">
                            <div class="form-group"><label>Fecha Salida</label><input type="date" id="upload-fecha-salida" required></div>
                            <div class="form-group"><label>Moneda</label><select id="upload-moneda"><option>USD</option><option>ARS</option></select></div>
                            <div class="form-group"><label>Tipo Promo</label><select id="upload-promo"></select></div>
                        </div>

                        <h3 class="section-title">Servicios</h3>
                        
                        <div id="servicios-container"></div>

                        <div class="add-service-bar">
                            <select id="selector-servicio" style="flex:1;">
                                <option value="">Seleccionar Servicio...</option>
                                <option value="aereo">‚úàÔ∏è A√©reo</option>
                                <option value="hotel">üè® Hotel</option>
                                <option value="traslado">üöï Traslado</option>
                                <option value="seguro">üõ°Ô∏è Seguro</option>
                                <option value="bus">üöå Paquete Bus</option>
                                <option value="crucero">üö¢ Crucero</option>
                                <option value="adicional">‚ûï Adicional</option>
                            </select>
                            <button type="button" id="btn-agregar-servicio" class="btn btn-secundario" style="background:#11173d; color:white;">+ Agregar</button>
                        </div>

                        <div class="totals-section form-group-row">
                            <div class="form-group">
                                <label>Costo Total (Interno)</label>
                                <input type="number" id="upload-costo-total" readonly>
                            </div>
                            <div class="form-group">
                                <label>Tarifa de Venta (Total)</label>
                                <input type="number" id="upload-tarifa-total" required oninput="window.calcularPorPersona()">
                            </div>
                            <div class="form-group">
                                <label>x Persona (Base Doble)</label>
                                <input type="text" id="upload-tarifa-persona" readonly style="background: rgba(255,255,255,0.15); border: 1px solid rgba(255,255,255,0.3); color: #4caf50; font-weight: bold; cursor: default;">
                            </div>
                        </div>

                        <div class="finance-section">
                            <div class="form-group"><label>üí≥ Financiaci√≥n / Notas de Pago</label><textarea id="upload-financiacion" rows="3" placeholder="Ej: Se√±a del 30%, saldo 20 d√≠as antes..."></textarea></div>
                        </div>

                        <div style="text-align:right; margin-top:20px;">
                            <button type="submit" class="btn btn-primario" style="padding:15px 40px; font-size:1.1em;">Guardar Paquete</button>
                        </div>
                    </form>
                </div>
            </div>

            <div id="view-gestion" class="view">
                <h2 style="color:#11173d;">Aprobaciones Pendientes</h2>
                <div id="grid-gestion" class="grilla-resultados"></div>
            </div>

            <div id="view-users" class="view">
                <div class="user-create-card">
                    <h3 style="margin-top:0; color:#11173d;">Crear Nuevo Usuario</h3>
                    <form id="user-form" style="display:flex; gap:10px; align-items:flex-end;">
                        <div class="form-group" style="flex:2;"><label>Email</label><input type="email" id="user-email-input" required></div>
                        <div class="form-group"><label>Rol</label><select id="user-role-input"><option value="usuario">Usuario</option><option value="editor">Editor</option><option value="admin">Admin</option></select></div>
                        <div class="form-group" style="flex:2;"><label>Franquicia/Alias</label><input type="text" id="user-franchise-input" required></div>
                        <button type="submit" class="btn btn-primario" style="height:45px;">Guardar</button>
                    </form>
                </div>
                <div class="user-list-card">
                    <h3 style="padding:0 20px; color:#777;">Usuarios Existentes</h3>
                    <div id="users-list"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="modal-detalle" class="modal-overlay">
        <div class="modal-contenido">
            <button id="modal-cerrar" class="modal-cerrar-btn">√ó</button>
            <div id="modal-body" class="modal-detalle-body"></div>
        </div>
    </div>

    <div id="custom-alert-overlay" class="custom-alert-overlay">
        <div class="custom-alert-box">
            <div id="custom-alert-icon" style="font-size:3em; margin-bottom:15px;"></div>
            <h3 id="custom-alert-title" style="margin:0 0 10px 0; color:#11173d;"></h3>
            <p id="custom-alert-message" style="color:#555; margin-bottom:25px;"></p>
            <div style="display:flex; gap:10px; justify-content:center;">
                <button id="custom-alert-cancel" class="btn btn-secundario" style="display:none;">Cancelar</button>
                <button id="custom-alert-btn" class="btn btn-primario">Aceptar</button>
            </div>
        </div>
    </div>

    <div id="loader-overlay">
        <div class="hourglassBackground">
            <div class="hourglassContainer">
                <div class="hourglassCurves"></div><div class="hourglassCapTop"></div><div class="hourglassGlassTop"></div><div class="hourglassSand"></div><div class="hourglassSandStream"></div><div class="hourglassCapBottom"></div><div class="hourglassGlass"></div>
            </div>
        </div>
    </div>

    <footer class="main-footer">Designed by Juan Pablo Martin</footer>

    <script src="app.js"></script>
</body>
</html>









